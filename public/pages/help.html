<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Help & User Guide - Driver Bonus Platform</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="../css/styles.css">
    <style>
        .help-section { scroll-margin-top: 80px; }
        .sidebar-sticky { position: sticky; top: 80px; }
    </style>
</head>
<body class="bg-light">
    <!-- Header injected by ui.js -->

    <div class="container mt-4 mb-5">
        <div class="row">
            <div class="col-md-3">
                <div class="sidebar-sticky">
                    <div class="card shadow-sm">
                        <div class="card-body">
                            <h5 class="card-title">Contents</h5>
                            <nav class="nav flex-column">
                                <a class="nav-link" href="#overview">Overview</a>
                                <a class="nav-link" href="#import">Importing Data</a>
                                <a class="nav-link" href="#verification">Driver Verification</a>
                                <a class="nav-link" href="#payments">Processing Payments</a>
                                <a class="nav-link" href="#roles">User Roles</a>
                                <a class="nav-link" href="#troubleshooting">Troubleshooting</a>
                            </nav>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="col-md-9">
                <div class="card shadow-sm mb-4">
                    <div class="card-body p-4">
                        <section id="overview" class="help-section mb-5">
                            <h2>Project Overview</h2>
                            <hr>
                            <p>The Driver Bonus Tracking Platform automates the accumulation and tracking of driver performance bonuses. It is specifically designed to handle unverified drivers who accumulate bonuses over several weeks before receiving a lump-sum payment upon verification.</p>
                        </section>

                        <section id="import" class="help-section mb-5">
                            <h3><i class="bi bi-file-earmark-excel"></i> Importing Data</h3>
                            <p>To import weekly bonuses, go to the <strong>Import</strong> page. The system accepts <code>.xlsx</code> files with the following requirements:</p>
                            <ul>
                                <li><strong>Single Sheet:</strong> The file must contain exactly one worksheet.</li>
                                <li><strong>Required Columns:</strong>
                                    <ul>
                                        <li><code>ID</code>: The unique driver hash identifier.</li>
                                        <li><code>Full name</code>: The driver's name.</li>
                                        <li><code>Date</code>: The week date for the bonus.</li>
                                        <li><code>Net payout</code>: The bonus amount (numeric).</li>
                                    </ul>
                                </li>
                                <li><strong>Optional Column:</strong> <code>Phone number</code>.</li>
                            </ul>
                            <div class="alert alert-info">
                                <strong>Note:</strong> The system automatically skips drivers who are already marked as "Verified" to prevent duplicate payment tracking.
                            </div>
                        </section>

                        <section id="verification" class="help-section mb-5">
                            <h3><i class="bi bi-patch-check"></i> Driver Verification</h3>
                            <p>When a driver completes their documentation:</p>
                            <ol>
                                <li>Search for the driver on the <strong>Dashboard</strong> or search bar.</li>
                                <li>Click on <strong>View & Pay</strong> to open the driver's profile.</li>
                                <li>Click <strong>Mark as Verified</strong>.</li>
                                <li>Select the verification date and confirm.</li>
                            </ol>
                            <p class="text-danger"><em>Warning: Once a driver is verified, no more bonuses can be imported for them in this system.</em></p>
                        </section>

                        <section id="payments" class="help-section mb-5">
                            <h3><i class="bi bi-cash-coin"></i> Processing Payments</h3>
                            <p>To pay out accumulated bonuses:</p>
                            <ol>
                                <li>Open the driver's detail page.</li>
                                <li>If they have pending bonuses, the <strong>Process Payment</strong> button will be visible.</li>
                                <li>Fill in the payment date, method, and any reference notes.</li>
                                <li>Click <strong>Record Payment</strong>. The accumulated bonuses will be linked to this payment and cleared from the "Pending" status.</li>
                            </ol>
                        </section>

                        <section id="roles" class="help-section mb-5">
                            <h3>User Roles</h3>
                            <table class="table table-sm">
                                <thead>
                                    <tr>
                                        <th>Action</th>
                                        <th>Staff</th>
                                        <th>Admin</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr><td>Upload Excel</td><td>✅</td><td>✅</td></tr>
                                    <tr><td>Search Drivers</td><td>✅</td><td>✅</td></tr>
                                    <tr><td>Process Payment</td><td>✅</td><td>✅</td></tr>
                                    <tr><td>Manage Users</td><td>❌</td><td>✅</td></tr>
                                    <tr><td>View Audit Logs</td><td>❌</td><td>✅</td></tr>
                                </tbody>
                            </table>
                        </section>

                        <section id="troubleshooting" class="help-section">
                            <h3>Troubleshooting</h3>
                            <div class="accordion" id="helpAccordion">
                                <div class="accordion-item">
                                    <h2 class="accordion-header">
                                        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseOne">
                                            Why was my Excel file rejected?
                                        </button>
                                    </h2>
                                    <div id="collapseOne" class="accordion-collapse collapse" data-bs-parent="#helpAccordion">
                                        <div class="accordion-body">
                                            Common reasons: Multiple sheets in the file, missing "ID" or "Net payout" columns, or typos in header names (e.g., "Phone" instead of "Phone number").
                                        </div>
                                    </div>
                                </div>
                                <div class="accordion-item">
                                    <h2 class="accordion-header">
                                        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseTwo">
                                            A driver is missing from my import results.
                                        </button>
                                    </h2>
                                    <div id="collapseTwo" class="accordion-collapse collapse" data-bs-parent="#helpAccordion">
                                        <div class="accordion-body">
                                            Check the "Skipped" list. If the driver was already marked as Verified, the system will not import their data to avoid double-payment.
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </section>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="../js/auth.js"></script>
    <script src="../js/ui.js"></script>
</body>
</html>